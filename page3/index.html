<!DOCTYPE html>
<html lang="en-us">

  <head>
  <link href="http://gmpg.org/xfn/11" rel="profile">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta http-equiv="content-type" content="text/html; charset=utf-8">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      Triple Eh? &middot; 
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">
  <link rel="stylesheet" href="/public/css/lanyon.css">
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=PT+Serif:400,400italic,700%7CPT+Sans:400">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/Boing.png">
  <link rel="shortcut icon" href="/public/Boing.png">

  <!-- RSS -->
  <link rel="alternate" type="application/rss+xml" title="RSS" href="/atom.xml">
</head>


  <body class="theme-base-09">

    <!-- Target for toggling the sidebar `.sidebar-checkbox` is for regular
     styles, `#sidebar-checkbox` for behavior. -->
<input type="checkbox" class="sidebar-checkbox" id="sidebar-checkbox">

<!-- Toggleable sidebar -->
<div class="sidebar" id="sidebar">
  <div class="sidebar-item">
    <p>Triple Eh? Ltd.</p>
  </div>

  <nav class="sidebar-nav">
    <a class="sidebar-nav-item" href="/">Blog</a>

    

    
    
      
        
      
    
      
        
      
    
      
        
          <a class="sidebar-nav-item" href="/archive/">Archive</a>
        
      
    
      
    
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
      
        
      
    
	
		<span class="sidebar-nav-item">Follow me:</span>
		<a class="sidebar-nav-item" href="https://twitter.com/korruptor">- Twitter</a>
		<a class="sidebar-nav-item" href="https://www.youtube.com/channel/UC6H2Ql7vVE4hHc-GNkMK8bQ">- You Tube</a>
		<a class="sidebar-nav-item" href="https://triple-eh.tumblr.com">- Tumblr</a>
		<span class="sidebar-nav-item">Games:</span>
		<a class="sidebar-nav-item" href="http://play-lumo.com/">- Lumo</a>
		<span class="sidebar-nav-item">Web:</span>
		<a class="sidebar-nav-item" href="http://triple-eh.net">- Triple Eh?</a>
		<a class="sidebar-nav-item" href="http://triple-eh.net/presskit/index.php">- Press Kit</a>
		<span class="sidebar-nav-item">Feed:</span>
		<a class="sidebar-nav-item" href="https://triple-aye.net/atom.xml">- Atom Feed</a>
  	<a class="sidebar-nav-item" href="https://triple-aye.net/feed.json">- JSON Feed</a>
   </nav>


  <div class="sidebar-item">
    <p>
      &copy; 2017. All rights reserved.
    </p>
  </div>
</div>


    <!-- Wrap is the content to shift when toggling the sidebar. We wrap the
         content to avoid any CSS collisions with our real content. -->
    <div class="wrap">
      <div class="masthead">
        <div class="container">
          <h3 class="masthead-title">
            <a href="/" title="Home">Triple Eh?</a>
            <small></small>
          </h3>
        </div>
      </div>

      <div class="container content">
        <div class="posts">
  
  <div class="post">
    <h1 class="post-title">
      <a href="http://localhost:4000/2017/02/24/Devlog-24.02.17/">
        Devlog - 24.02.17
      </a>
    </h1>

    <span class="post-date">24 Feb 2017</span>

    <p>Oops, I missed a week and the devlog is late. Sorry! Game Dev and all that. Shipping late’s what we do…</p>

<p>I put off posting as I was hopeful that I’d have something nice to show, but things haven’t quite worked out as planned:</p>

<h2 id="next-game">Next Game</h2>

<p>I added a damage effect –  the “damage beans” – on the screen edges to indicate that the player’s been hurt. It’s a simple post-process overlay, but with a normal map  added you get a nice distortion of the 
screen as it fades in and out. Standard stuff for the most part. Except I have two versions, one that’s a blood-splat, and one that’s a nice high-res picture of actual baked beans. :D</p>

<p>I’ve also had a quick play with the audio system in UE4. My natural inclination is to integrate FMOD, but I’m hearing from fellow developers on Mastodon that UE4’s system is pretty good, and from the quick tests 
it might well be. Audio attenuation and geometry occlusion definite seem to work, which could be enough for what I need.</p>

<p>But for the last 10 days or so I’ve been playing around with look and feel tests.</p>

<p><img src="/images/17.02.17-SkyBox.jpg" alt="Nice skies" /></p>

<p>This skybox got me into a lot of trouble.</p>

<p>My intention with Next Game is to do everything quite low-poly and avoid as much texturing as possible. One reason for that is to look different, but texturing and modelling 
take time, and time/money aren’t something that I have a lot of. If I have to get into texturing then I’d probably go for something old-school, like Gibhard or Strafe, but for obvious reasons I’d like to avoid that. 
I think every man and his dog will be doing that style in a year or two…</p>

<p>Unfortunately having a super realistic skybox lead me down a path where geometry got a bit too complex, and things rapidly looked incongruous when flat-shaded with high quality lighting. Basically, I couldn’t get it to look good unless it was
extremely high-contrast. Which was unplayable. Although, I did spend a day flirting with an entirely black-and-white grading that I might go back to for some levels.</p>

<p>Anyway, I’ve thrown away all that work. All the geometry modelled so far, the test level, the greybox, all the materials and all the textures. That stung a bit.</p>

<p>This week I started again, but from a better footing: I chose a nice, harmonious, palette, and put a simple gradient in the sky-box. The palette is very limited: four base colours, four shades of each colour, and a gradient from top to bottom of each colour. I’ll 
most likely add to that over time, but for now this is working well.</p>

<p>UV-unwrapping can be done extremely quickly. Anything single colour can just be atlas unwrapped and pushed over the appropriate shade in the texture, while things with gradients just need a little 
more attention to align them properly. Because the palette is fixed, everything sits in the scene, and with some lightmass settings tweaked I’m getting really rich colour gradients, colour bounces being picked up and 
deep shadows. It looks better, basically. It’s also super colourful, to the point of being cartoony – far too much for this game – but I find it easier to turn everything up to 11 and then slowly dial it in over time. (Early screenshots of Lumo are
practically black because I was shooting for a Scooby-Doo vibe. The final game looks nothing like it…)</p>

<p>What needs sorting out now is the correct scale for things. My character moves extremely quickly, and rocket jumps go for miles. This will take a bit of two-and-fro, but that’s next week’s mission. At the minute everything’s a little too big but I find it quite endearing. Iterate, iterate.</p>

<h2 id="neutrino">Neutrino</h2>

<p><img src="/images/2017-02-19-TilemapAddRemove.png" alt="Tilemap Editor" /></p>

<p>Still train-coding my way through this and the big news is, the tile map editor that I said I’d never write is basically done. It’s missing the ability to create re-usable brushes from placed tiles, so I might go back and add that at some point, but bar some tidying up and 
deciding on the save format it’s doing what I’ll need.  This threw up a couple of interesting things.</p>

<p>I was about to delve into the murk of C’s directory and file-handling, which is annoyingly different depending on the platform, but decided to have a quick search through Github to see what was already out there, and came across this little gem: <a href="https://github.com/cxong/tinydir">Tinydir</a>, 
 works brilliantly.</p>

<p>While testing the tilemap editor I thought I’d throw in some massive numbers to see how it performed. Turns out things started crawling pretty quickly, which was er, a shock. After pushing it through Richard Mitton’s <a href="http://www.codersnotes.com/sleepy/">Very Sleepy</a> 
the hot spot seemed to be in how I’m populating the VBOs, which again, was a bit of a surprise. This was supposed to be an optimised version of what I’d written a few years back on iOS…</p>

<p>For some reason I was only getting ~8k sprites per frame. I was expecting quite a few more. The culprit was this line:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>mTransform = mTranslate * mRotation * mScale;
</code></pre>
</div>

<p>Pretty standard stuff, this is just creating the translation matrix which I’m pushing all my vertices through before copying the result into the VBO. (Yes, at some point I should just do all that into the shader…)  I’ve done this before and had much better performance, 
except then I was using my own math class, and this time I’m using <a href="http://glm.g-truc.net/0.9.8/index.html">OpenGL Math</a>. I figured it’d  be better to pass off the optimisation and maintenance of my maths stuff to, well, people that know some maths.</p>

<p>So I dug into the operator * overload:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>GLM_FUNC_QUALIFIER tmat4x4&lt;T, P&gt; operator*(tmat4x4&lt;T, P&gt; const &amp; m1, tmat4x4&lt;T, P&gt; const &amp; m2)
{
	typename tmat4x4&lt;T, P&gt;::col_type const SrcA0 = m1[0];
	typename tmat4x4&lt;T, P&gt;::col_type const SrcA1 = m1[1];
	typename tmat4x4&lt;T, P&gt;::col_type const SrcA2 = m1[2];
	typename tmat4x4&lt;T, P&gt;::col_type const SrcA3 = m1[3];

	typename tmat4x4&lt;T, P&gt;::col_type const SrcB0 = m2[0];
	typename tmat4x4&lt;T, P&gt;::col_type const SrcB1 = m2[1];
	typename tmat4x4&lt;T, P&gt;::col_type const SrcB2 = m2[2];
	typename tmat4x4&lt;T, P&gt;::col_type const SrcB3 = m2[3];

	tmat4x4&lt;T, P&gt; Result(uninitialize);
	Result[0] = SrcA0 * SrcB0[0] + SrcA1 * SrcB0[1] + SrcA2 * SrcB0[2] + SrcA3 * SrcB0[3];
	Result[1] = SrcA0 * SrcB1[0] + SrcA1 * SrcB1[1] + SrcA2 * SrcB1[2] + SrcA3 * SrcB1[3];
	Result[2] = SrcA0 * SrcB2[0] + SrcA1 * SrcB2[1] + SrcA2 * SrcB2[2] + SrcA3 * SrcB2[3];
	Result[3] = SrcA0 * SrcB3[0] + SrcA1 * SrcB3[1] + SrcA2 * SrcB3[2] + SrcA3 * SrcB3[3];
	return Result;
}
</code></pre>
</div>

<p>Ow. That’s creating a lot of vec4 variables over the course of a few thousand sprites.</p>

<p>I admit, I’m learning GLM as I go, and maybe there’re some functions to do mat4 multiplications in place but the docs make my nose bleed, and to be honest I couldn’t be arsed to trawl through it all.</p>

<p>So instead of using a glm::mat4, my matrix is now a simple array, allocated at the start of the function, that only contains the scale and rotation. I can push the sprite corners through this 
and add the translation, and remove a lot of obviously zero multiplications from the process.</p>

<div class="highlighter-rouge"><pre class="highlight"><code>vBL.x = (vBL_Pos-&gt;x * s_mTransMat[0]) + (vBL_Pos-&gt;y * s_mTransMat[1]) + vPos-&gt;x;
vBL.y = (vBL_Pos-&gt;y * s_mTransMat[3]) + (vBL_Pos-&gt;y * s_mTransMat[4]) + vPos-&gt;y;
vBL.z = vPos-&gt;z;

etc. etc. 

</code></pre>
</div>

<p>This is fine for 2D stuff, which is all I intend to use this engine for.</p>

<p>And the result? About a 15x speed-up. In fact, I get exactly the same number of sprites out of a single thread on my X1 laptop, as I do on my big fat devrig: ~150k @ 60fps.</p>

<p>I’ll probably look to multi-thread this once the physics engine and fmod have been integrated, but for now it’s more than good enough for a little shoot-em-up.</p>

<p>The moral of the story: Future Gareth, you should probably look into how to use GLM properly.</p>


  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="http://localhost:4000/2017/02/03/Devlog-03.02.2017/">
        Devlog - 03.02.2017
      </a>
    </h1>

    <span class="post-date">03 Feb 2017</span>

    <p><img src="/images/17.02.03-DecalsTest2.jpg" alt="Hello Mum" /></p>

<p>It’s been a mad-cap couple of weeks. Here’s what I’ve been up to:</p>

<h2 id="lumo">Lumo</h2>

<p>Yesterday I pushed out version 1.17.2, to fix issues found with wireless Xbone pads running on Windows 7. Thanks go out to 
Patrick Hogan — the developer of InControl, a nice cross platform input library for Unity that I can recommend, <a href="http://www.gallantgames.com/pages/incontrol-introduction">available here</a> —  for sparing the time to test around the issue and provide a fix.</p>

<p>In addition to taking on the new version of InControl, I’ve also moved over to XInput, so — in theory —  joypad support should be a 
little more robust on Windows going forward. (Crosses Fingers)</p>

<p>This build also fixes a possible bug with joypad “submit” actions not being registered by the pause screen UI, as well as turning 
off Unity’s bullshit “automatic” navigation option on some of the button layouts. Honestly, fuck that UI system.</p>

<h2 id="neutrino">Neutrino</h2>

<p>I’ve been doing a bit of train / weekend coding, so this has moved forward:</p>

<ul>
  <li>Finished off the Input system. You can now poll mouse and up to four joypads. Previously it only handled attach/dettach events.</li>
  <li>Added some keystate handling for specific inputs in editor modes (keyboard shortcuts, basically)</li>
  <li>Added a bunch of helper functions to quickly get sprites from texture pages</li>
  <li>Got the Tile Map editor to the point where you can select and place tiles, freely, or snapped to a grid</li>
</ul>

<p>Next job is to store that in something I can spit out and reload that’ll be the basis of the level data. I’ll probably do a very thin 
Command pattern wrapper over this so I can support unlimited Undo/Redo as well.</p>

<h2 id="next-game">Next Game</h2>

<p>I’ve been all over the shop with this the last couple of weeks:</p>

<ul>
  <li>Finished off the weapon-types code and added weapon pickups</li>
  <li>Player can now be killed, either through damage or falling out of the world</li>
  <li>Player respawns properly</li>
  <li>Added Ammo to the HUD</li>
  <li>Added decals, and spent a morning drawing swears on walls</li>
  <li>Added a new “Pain Room” to the test room, for traps and damage/stat tweaking</li>
  <li>Dipped my toe into Cascade, UE4’s particle system, and made some effects for pickups</li>
  <li>Started on a shotgun model for the first person view</li>
  <li>Added some new models for the ammunition pickpus</li>
</ul>

<p>The last item in that list has been my main diversion since the last post.</p>

<p>I know that I’m going to be doing a fair amount of modelling on this project so I’m still slowly schooling myself on workflows. For this, I decided 
to do some fairly high poly models of the pickup items and then bake them down to a low poly cage. Like everything, once I worked out how to 
do it, it’s reasonably straight forward, but it took a day or so to really get it working.</p>

<p>Building low poly cages seems to be a bit of an art, depending on the sorts of shapes you want, but after a lot of attempts I was able to bake AO and 
normals in Modo that looked pretty clean on the low poly asset, and came out clearly in-engine. I’m far from an expert at this, but it’s something I 
wanted to have in the toolbox even if I don’t use it very often.</p>

<p>I also spent a day or two messing about with Substance Painter. The “rent to own” model really appeals to me, as well as fitting in my budget, so I 
jumped on that. It’s a little unstable on my rig - I’ve had 4 or 5 really messy crashes - but when it’s working, it’s great. I doubt I’ll delve too 
deeply into the materials for this game, but anything that speeds up texturing is going to be worth the effort learning.</p>

<p>Now that Vine is dead I’ve started posting screenshots and little vids onto my Instagram account. You can keep an eye-out, <a href="https://www.instagram.com/garethnoyce/">here</a>.</p>

<p>Also, there’s been a big migration of developers from Twitter onto Mastodon.social. If you’re a twitter user then I don’t really need to explain why this 
is happening, but if not and you’re interested in a low traffic, Nazi-free open source Twitter-alike then <a href="https://mastodon.social">Mastodon</a> is worth 
checking out. I’m @korruptor as usual.</p>

  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="http://localhost:4000/2017/01/28/Visual-Studio-Code/">
        Visual Studio Code
      </a>
    </h1>

    <span class="post-date">28 Jan 2017</span>

    <p><img src="images/vscode.png" alt="Visual Studio Code" /></p>

<p>I’m interrupting normal blogging service to give a shout out to Visual Studio Code, on Linux. I 
was put onto it by one of my students, and I’ve been running it for the last week as a daily driver when 
train-coding. And it’s great.</p>

<p>Normally I use Emacs or Vim, depending on the mood, and I have done for years, but both of them require a 
fair bit of setup, and I’ve always got a second terminal open for compilation / launching
the executable.</p>

<p>Visual Studio Code, while not quite as nice as either of those from the text editing pov, is easily on a 
par with something like Sublime Text, but with a special party trick: it integrates extremely well with GCC &amp; GDB.</p>

<p>You can setup a problem parser, which will grep gcc’s output, allowing you to quickly jump to compilation errors, and
it’ll launch GDB and act as a front-end, allowing you to hover-inspect variables and do all the things you’d
expect from a larger IDE.</p>

<p>And it’s nippy. Surprisingly nippy. In fact, for C/C++ programming, this has quickly become my go-to editor 
on Linux. I can heartily recommend it.</p>

<p>If there’s one nitpick, it’s the lack of horizontal splits. Something Visual Studio seems to be partially 
allergic to, as well. But other than that, if you’re a Linux coder and you want some of the trappings of an 
IDE, without installing something shit like Eclipse, or slow and lethargic like QT Creator, VS Code is well
worth checking out.</p>

<p>And I can’t believe I’m saying that.</p>


  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="http://localhost:4000/2017/01/20/Devlog-20.1.17/">
        Devlog - 20.1.17
      </a>
    </h1>

    <span class="post-date">20 Jan 2017</span>

    <div style="text-align: center"><iframe width="560" height="315" src="https://www.youtube.com/embed/qr0ff58evkQ" frameborder="0" allowfullscreen=""></iframe><p>&nbsp;</p></div>

<p>Bar teaching, the last two weeks have been entirely focused on Next Game, so I’ve managed to get quite a lot done.</p>

<p>Character movement is essentially ‘finished’. It’s pretty nippy - Quake 1 fast, in fact - but it feels nice and responsive. At least to me . Rocket Jumps will be featuring heavily, so spending the time to play around with this in order to get the height and distance nailed, was essential. Changes from here-on will just be tiny number tweaks, so I’m at the point now where I feel safe to begin whiteboxing levels.</p>

<p>The player’s inventory management is also working. You can cycle through weapons, pick up armour and health, as well as take damage. Armour modifiers still need to be added but I know exactly how these will operate.</p>

<p>UE’s weapon and projectile systems took a while to figure out, but I do now have 3 basic types that should cover everything I intend to use:</p>

<ul>
  <li>Projectile based: rocket launcher / nail gun, stuff like that.</li>
  <li>Instant shot: Pistols</li>
  <li>Instant multi-shot: Shotguns.</li>
</ul>

<p>Weapons have individual fire rates, can spawn splash damage areas and their damage can attenuate over distance. The only thing you might expect that’s missing - especially if you play something like COD - is projectile penetration. I’m toying with the idea of adding this, but right now my guess is that it’ll be pretty useless within the sort of levels that I intend to create.</p>

<p>None of the weapons have been properly setup atm, as that’s something I’ll do once some NPCs are in. I need moving targets to shoot at!</p>

<p>I’ve also had a crash course in the localisation system, configuring animation blueprints, playing audio and have dipped my toe into Cascade again.</p>

<p>For the most part the last two weeks have been really productive, but I’ve been badly burned by a couple of things. One of the worst was discovering that UE4 types get garbage-collected quite aggressively. If, say, you have a TArray of elements but don’t add the UPROPERTY() macro above their definition, then at some point they’ll disappear from under you. It took me a few hours to work out exactly what was causing the crash and why, as it was appearing fairly randomly - and taking the editor out with it - but like everything, it’s completely obvious once you spot it.</p>

<p>I’ve also learned the hard way that Play In Editor - PIE - masks a certain type of class initialisation bug. Stupidly, I had a set of FText variables defined outside the class (they were static char arrays at first) which compiled perfectly fine, and even ran in the editor, but cooked builds would immediately crash. It took me a couple of hours to realise that it wasn’t my Anti Virus, or some auto-build failure, but UE4 barfing when trying to initialise the variable before the engine had started up. This was happening before the splash screen was appearing, so I wasn’t even getting a log to help… Again, totally obvious once you spot it.</p>

<p>I probably lost a day bug hunting this stuff, so I’m a little behind where I wanted to be this week -  ammo pickups are half done, and weapon pickups haven’t been started - but I’m basically at the point where I can play around with some look and feel tests, and maybe start white-boxing some spaces to run around in. I’m also growing in confidence with the engine and my ability to at least fix my own fuck-ups, so it’s probably a net win…</p>

<p>I’ve added a little video to You Tube for those who want a peek (see the top of this post). It should go without saying that none of the assets in this are final, or even likely to appear in-game. It’s bits and bobs from Lumo and UE4’s example assets, that I’ve thrown together. Although I did lose a good chunk of time over Xmas playing with the lighting and post, just to see how it worked ;D</p>

<p>The music is by Steve Birch, from the album Wonderland, that’ll be released by Joof sometime in Feb.</p>


  </div>
  
  <div class="post">
    <h1 class="post-title">
      <a href="http://localhost:4000/2017/01/06/Dev-blog,-6th-Jan/">
        Dev blog, 6th Jan
      </a>
    </h1>

    <span class="post-date">06 Jan 2017</span>

    <p>Happy New Year!</p>

<p>Apologies. The blog was on a temporary hiatus through December, as I had to prepare for a programming course that I’m 
due to give at TAMK University this year. That meant getting up-to-speed with the latest Unity version,<br />
and writing a simple game that’ll form the basis of the course. As well as having a Xmas Holiday.</p>

<p>But I did do some work and make some decisions. The first of which: Oh Snow! is canned. Probably forever. Why?
Short answer; it was meant to be my toy project, not something that took a year to make, and due to teaching 
and signing up for a Finnish language course, I basically did nothing on it. But I did learn some Unreal, so it 
wasn’t a complete waste.</p>

<p>That means <em>Next Game</em> has officially been started. Here’s a little WIP screenie:</p>

<p><a href="/images/2017-01-06-PsyanceTestRoom.jpg"><img src="/images/2017-01-06-PsyanceTestRoom.jpg" alt="It's an FPS!" /></a></p>

<p>Yes, it’s an FPS. No, I’ve not done any graphics or modelling yet. And yes, that’s the default UE4 character model.</p>

<p>More info on <em>Next Game</em> in a later update.</p>

<p>Aside from that, Unity 5.5.x, and eating mince pies(+), I’ve done some more on Neutrino. The choice of using cmake for the 
build process turned out to be an excellent one. I thought I’d have a pop at getting the game running on windows, and although 
the cmake gui is a bit weird, once I worked out the intricacies it spat out a Visual Studio 2015 solution and Neutrino built and ran 
first time. And yeah, that surprised the hell out of me.</p>

<p>I’ve been continuing my love-in with ImGui, and decided that the effort to parse TileD tilemaps and integrate them into everything else 
I want to do was becoming a monumental pain in the arse. And I quite fancy rendering the tilemap through a pixel shader <a href="http://blog.tojicode.com/2012/07/sprite-tile-maps-on-gpu.html">a little like this</a>.
So I’ve started writing a simple tilemap editor in-engine. Exactly what I said I wouldn’t do. Ahem.</p>

<p>Early doors. I’m at the point where I can click a tile and move it about.</p>

<p><a href="/images/2017-01-06-StartOftheTilemap.png"><img src="/images/2017-01-06-StartOftheTilemap.png" alt="It's a tilemap editor. Ish" /></a></p>

<p>(+) I hate mince pies.</p>


  </div>
  
</div>

<div class="pagination">
  
    <a class="pagination-item older" href="/page4">Older</a>
  
  
    
      <a class="pagination-item newer" href="/page2">Newer</a>
    
  
</div>


      </div>
    </div>

    <label for="sidebar-checkbox" class="sidebar-toggle"></label>

    <script>
      (function(document) {
        var toggle = document.querySelector('.sidebar-toggle');
        var sidebar = document.querySelector('#sidebar');
        var checkbox = document.querySelector('#sidebar-checkbox');

        document.addEventListener('click', function(e) {
          var target = e.target;

          if(!checkbox.checked ||
             sidebar.contains(target) ||
             (target === checkbox || target === toggle)) return;

          checkbox.checked = false;
        }, false);
      })(document);
    </script>
  </body>
</html>
